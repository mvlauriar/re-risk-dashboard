<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Quadrant Chart</title>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            height: 100vh; 
            font-family: Arial, sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 500px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        .data-point {
            position: absolute;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .tooltip {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
            z-index: 100;
            max-width: 200px;
        }
        .divider-h, .divider-v {
            position: absolute;
            background: #666;
            opacity: 0.5;
        }
        .divider-h {
            width: 100%;
            height: 1px;
        }
        .divider-v {
            height: 100%;
            width: 1px;
        }
        .axis-label {
            position: absolute;
            font-size: 12px;
            color: #666;
        }
        .legend {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .quadrant-label {
            position: absolute;
            font-size: 11px;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="root" style="width: 100%; height: 100%; padding: 20px;"></div>
    
    <script type="text/babel">
        const RiskQuadrantChart = () => {
          // Risk quadrant data
          const data = [
            { metro: "Atlanta, GA", currentRisk: 36, riskMomentum: 10, category: "Moderate" },
            { metro: "Austin, TX", currentRisk: 66, riskMomentum: 69, category: "High" },
            { metro: "Boston, MA", currentRisk: 35, riskMomentum: 0, category: "Moderate" },
            { metro: "Chicago, IL", currentRisk: 29, riskMomentum: 23, category: "Low" },
            { metro: "Dallas, TX", currentRisk: 44, riskMomentum: 41, category: "Moderate" },
            { metro: "Denver, CO", currentRisk: 46, riskMomentum: 50, category: "Moderate" },
            { metro: "Los Angeles, CA", currentRisk: 67, riskMomentum: 84, category: "High" },
            { metro: "Miami, FL", currentRisk: 41, riskMomentum: 27, category: "Moderate" },
            { metro: "New York, NY", currentRisk: 37, riskMomentum: 10, category: "Moderate" },
            { metro: "San Francisco, CA", currentRisk: 65, riskMomentum: 100, category: "High" }
          ];

          // Calculate averages for quadrants
          const avgCurrentRisk = data.reduce((sum, item) => sum + item.currentRisk, 0) / data.length;
          const avgRiskMomentum = data.reduce((sum, item) => sum + item.riskMomentum, 0) / data.length;

          // Color mapping based on risk category
          const getColor = (category) => {
            switch(category) {
              case "High": return "#d32f2f";
              case "Moderate": return "#f57c00";
              case "Low": return "#388e3c";
              default: return "#2196f3";
            }
          };

          const [activeTooltip, setActiveTooltip] = React.useState(null);
          
          // Get quadrant name based on position
          const getQuadrant = (currentRisk, riskMomentum) => {
            return currentRisk >= avgCurrentRisk && riskMomentum >= avgRiskMomentum ? "High Risk & Accelerating" :
                   currentRisk >= avgCurrentRisk && riskMomentum < avgRiskMomentum ? "High Risk & Stable" :
                   currentRisk < avgCurrentRisk && riskMomentum >= avgRiskMomentum ? "Watch List - Emerging Risk" :
                   "Relative Stability";
          };
          
          // Calculate size based on combined risk
          const getSize = (currentRisk, riskMomentum) => {
            return 15 + ((currentRisk + riskMomentum) / 2) * 0.3;
          };
          
          return (
            <div style={{
              backgroundColor: "white",
              padding: "24px",
              borderRadius: "8px",
              boxShadow: "0 4px 6px rgba(0,0,0,0.1)",
              border: "1px solid #e5e7eb"
            }}>
              <h2 style={{fontSize: "1.5rem", fontWeight: "bold", marginBottom: "4px", color: "#1f2937"}}>
                2025 Housing Market Risk Quadrant
              </h2>
              <p style={{fontSize: "0.875rem", color: "#4b5563", marginBottom: "24px"}}>
                Plotting current risk against risk momentum reveals markets poised for potential correction
              </p>
              
              <div className="legend">
                <div className="legend-item">
                  <div className="legend-color" style={{backgroundColor: "#d32f2f"}}></div>
                  <span style={{fontSize: "0.875rem"}}>High Risk</span>
                </div>
                <div className="legend-item">
                  <div className="legend-color" style={{backgroundColor: "#f57c00"}}></div>
                  <span style={{fontSize: "0.875rem"}}>Moderate Risk</span>
                </div>
                <div className="legend-item">
                  <div className="legend-color" style={{backgroundColor: "#388e3c"}}></div>
                  <span style={{fontSize: "0.875rem"}}>Low Risk</span>
                </div>
              </div>
              
              <div className="chart-container">
                {/* X and Y axis labels */}
                <div className="axis-label" style={{bottom: "5px", left: "50%", transform: "translateX(-50%)"}}>
                  Current Risk (0-100)
                </div>
                <div className="axis-label" style={{top: "50%", left: "5px", transform: "translateY(-50%) rotate(-90deg)", transformOrigin: "left"}}>
                  Risk Momentum (0-100)
                </div>
                
                {/* Quadrant dividing lines */}
                <div className="divider-h" style={{top: `${100 - avgRiskMomentum}%`}}></div>
                <div className="divider-v" style={{left: `${avgCurrentRisk}%`}}></div>
                
                {/* Quadrant labels */}
                <div className="quadrant-label" style={{top: "15%", right: "15%"}}>High Risk & Accelerating</div>
                <div className="quadrant-label" style={{top: "15%", left: "15%"}}>Watch List - Emerging Risk</div>
                <div className="quadrant-label" style={{bottom: "15%", right: "15%"}}>High Risk & Stable</div>
                <div className="quadrant-label" style={{bottom: "15%", left: "15%"}}>Relative Stability</div>
                
                {/* Data points */}
                {data.map((item, index) => (
                  <div key={index}>
                    <div 
                      className="data-point"
                      style={{
                        left: `${item.currentRisk}%`,
                        top: `${100 - item.riskMomentum}%`,
                        width: `${getSize(item.currentRisk, item.riskMomentum)}px`,
                        height: `${getSize(item.currentRisk, item.riskMomentum)}px`,
                        backgroundColor: getColor(item.category),
                      }}
                      onMouseEnter={() => setActiveTooltip(index)}
                      onMouseLeave={() => setActiveTooltip(null)}
                    ></div>
                    
                    {/* Tooltip */}
                    {activeTooltip === index && (
                      <div className="tooltip" style={{
                        display: 'block',
                        left: `${Math.min(item.currentRisk, 85)}%`,
                        top: `${Math.max(100 - item.riskMomentum, 15)}%`
                      }}>
                        <h3 style={{margin: 0, marginBottom: "5px", fontWeight: "bold"}}>{item.metro}</h3>
                        <p style={{margin: "3px 0", fontSize: "0.875rem"}}>
                          <strong>Risk Score:</strong> {item.currentRisk}/100
                        </p>
                        <p style={{margin: "3px 0", fontSize: "0.875rem"}}>
                          <strong>Risk Momentum:</strong> {item.riskMomentum}/100
                        </p>
                        <p style={{margin: "3px 0", fontSize: "0.875rem"}}>
                          <strong>Category:</strong> {item.category}
                        </p>
                        <p style={{
                          margin: "3px 0", 
                          marginTop: "8px", 
                          fontSize: "0.875rem", 
                          fontWeight: "bold", 
                          color: getColor(item.category)
                        }}>
                          Quadrant: {getQuadrant(item.currentRisk, item.riskMomentum)}
                        </p>
                      </div>
                    )}
                  </div>
                ))}
              </div>
              
              <div style={{marginTop: "16px", fontSize: "0.875rem", color: "#4b5563"}}>
                <p><strong>Note:</strong> Bubble size represents the combined risk intensity. Hover over each city for detailed insights.</p>
                <p style={{marginTop: "8px"}}><strong>Market Guidance:</strong> Cities in the top-right quadrant are experiencing high and accelerating risk conditions, making them vulnerable to potential market corrections in 2025.</p>
              </div>
            </div>
          );
        };
        
        ReactDOM.render(<RiskQuadrantChart />, document.getElementById('root'));
    </script>
</body>
</html>
